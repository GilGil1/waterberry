<!DOCTYPE html>
<html>

<head>
    <title>My first Vue app</title>
    <script src="https://unpkg.com/vue"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<body>

    <div id="app">
        <v-app id="inspire">


            <v-navigation-drawer v-model="drawer" app dark>
                <v-list-item>
                    <v-list-item-content>
                        <v-list-item-title class="title">
                            Application
                        </v-list-item-title>
                        <v-list-item-subtitle>
                            subtext
                        </v-list-item-subtitle>
                    </v-list-item-content>
                </v-list-item>

                <v-divider></v-divider>

                <v-list dense nav>
                    <v-list-item v-for="item in items" :key="item.title" :href="item.link" link>
                        <v-list-item-icon>
                            <v-icon>{{ item.icon }}</v-icon>
                        </v-list-item-icon>

                        <v-list-item-content>
                            <v-list-item-title>{{ item.title }}</v-list-item-title>
                        </v-list-item-content>
                    </v-list-item>
                </v-list>
            </v-navigation-drawer>
            <v-app-bar app>
                <v-app-bar-nav-icon @click="drawer = !drawer"></v-app-bar-nav-icon>

                <v-toolbar-title>Application</v-toolbar-title>
            </v-app-bar>

            <v-main>
                <v-container class="py-8 px-6" fluid>
                    <v-row class="fill-height">
                        <v-col>
                            <transition name="fade">
                                <router-view></router-view>
                            </transition>
                        </v-col>
                    </v-row>

                </v-container>
            </v-main>

            <v-footer app>
                footer
            </v-footer>
        </v-app>

    </div>



    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="https://npmcdn.com/vue-router/dist/vue-router.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


    <script type="text/x-template" id="reports">
        <div>
            <h1 class="font-weight-light">Sales Report</h1>
           
        </div>
    </script>

    <script type="text/x-template" id="home">

        <div>
            <h1 class="font-weight-light">Home </h1>
            <v-list>
                <v-list-item v-for="item in homeItems" :key="item.id" >                  
                    <v-list-item-content>
                        <v-list-item-title class="primary--text">{{ item.title }}</v-list-item-title>
                    </v-list-item-content>
                </v-list-item>
            </v-list>
        </div>
       
    </script>

    <script>



        const Reports = {
            template: '#reports',
            data: () => ({
                headers: [
                    {
                        text: "Product",
                        align: "left",
                        sortable: false,
                        value: "name"
                    },
                    { text: "Sales", value: "sales" },
                    { text: "Customers", value: "customers" },
                    { text: "Items", value: "items" },
                ],
                reportItems: [
                    {
                        id: 1,
                        name: "N95 Mask",
                        sales: 2062,
                        customers: 102,
                        items: 8029,
                        available: null
                    },
                    {
                        id: 2,
                        name: "Safety gloves",
                        sales: 62,
                        customers: 12,
                        items: 70,
                        available: null
                    },
                    {
                        id: 3,
                        name: "Widget 2",
                        sales: 262,
                        customers: 32,
                        items: 1020,
                        available: null
                    },
                    {
                        id: 4,
                        name: "Widget 4",
                        sales: 362,
                        customers: 12,
                        items: 190,
                        available: null
                    },
                    {
                        id: 4,
                        name: "Widget 4",
                        sales: 362,
                        customers: 12,
                        items: 190,
                        available: null
                    },
                    {
                        id: 19,
                        name: "Widget ABC",
                        sales: 62,
                        customers: 5,
                        items: 17,
                        available: null
                    },
                    {
                        id: 12,
                        name: "Widget 12",
                        sales: 262,
                        customers: 22,
                        items: 199,
                        available: null
                    },
                ]
            }),
            methods: {
                sumField(key) {
                    // sum data in give key (property)
                    return this.reportItems.reduce((a, b) => a + (b[key] || 0), 0)
                }
            }
        }


        const Home = {
            template: '#home',
            data: () => ({
                homeItems: [], 
                loading: true
            }),
            beforeRouteEnter(to, from, next) {
                next(Home => {
                    // Home.homeItems = [{ "userId": 5, "id": 1, "title": "dfdf aut autem", "completed": false }]
                    axios.get('https://jsonplaceholder.typicode.com/todos')
                        .then(response => (Home.homeItems = response.data))
                        .catch(error => console.log(error))

                    next();
                })
            },
            beforeRouteUpdate(to, from, next) {
                next(Home => {
                    // Home.homeItems = [{ "userId": 5, "id": 1, "title": "dfdf aut autem", "completed": false }]
                    axios.get('https://jsonplaceholder.typicode.com/todos')
                        .then(response => (Home.homeItems = response.data))
                        .catch(error => console.log(error))

                    next();
                })
            }
        }

        const routes = [
                { path: '/home', component: Home },
                { path: '/reports', component: Reports },
            ]

        const router = new VueRouter({
                routes
            })

        new Vue({
                el: '#app',
                router: router,
                vuetify: new Vuetify(),
                data() {
                    return {
                        items: [
                            { title: 'Home', icon: 'mdi-view-dashboard', link: '#/home' },
                            { title: 'Reports', icon: 'mdi-image', link: '#/reports' },
                        ],
                        right: null,
                        drawer: null,
                        cards: ['Today', 'Yesterday'],

                    }
                },

            })
    </script>
</body>

</html>